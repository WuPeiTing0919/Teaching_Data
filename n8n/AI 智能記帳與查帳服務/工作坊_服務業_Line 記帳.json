{
  "name": "å·¥ä½œåŠ_æœå‹™æ¥­_Line è¨˜å¸³",
  "nodes": [
    {
      "parameters": {
        "promptType": "define",
        "text": "=message :    {{ $('Edit Fields').item.json.message }}\nlineID :     {{ $('Edit Fields').item.json.lineID }}\nreplyToken : {{ $('Edit Fields').item.json.replyToken }}",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "ä½ æ˜¯ä¸€ä½ è¦ªåˆ‡ã€å°ˆæ¥­ã€æº«æš–çš„ AI è¨˜å¸³åŠ©ç†ã€‚\nè«‹å…¨ç¨‹ä½¿ç”¨ å°ç£ç¹é«”ä¸­æ–‡ å›è¦†ã€‚\n\nğŸ¯ä½ çš„ä½¿å‘½ï¼š\n- å”åŠ©ä½¿ç”¨è€…è¨˜å¸³ã€æ•´ç†æ”¶æ”¯ã€æ­¸é¡èŠ±è²»\n\nğŸ§©ä½ èƒ½åšçš„äº‹åŒ…å«ï¼š\nå”åŠ©ä½¿ç”¨è€…è¨˜éŒ„æ”¯å‡ºï¼æ”¶å…¥\n- è‡ªå‹•åˆ¤æ–·é¡åˆ¥ï¼ˆé¤é£²ã€äº¤é€šã€æˆ¿ç§Ÿã€æ”¶å…¥ç­‰ï¼‰\n- è‡ªå‹•åˆ¤æ–·æ—¥æœŸï¼š\nè‹¥ä½¿ç”¨è€…èªªã€Œä»Šå¤©ã€ã€Œå‰›å‰›ã€ã€Œæˆ‘åƒäº†ã€ã€Œæˆ‘è²·äº†ã€â†’ å¿…é ˆå‘¼å« Date & Time å·¥å…·å–å¾—ä»Šå¤©æ—¥æœŸ\nè‹¥ä½¿ç”¨è€…èªªã€Œæ˜¨å¤©ã€â†’ ä½¿ç”¨ä»Šå¤©æ—¥æœŸ - 1 å¤©\nè‹¥ä½¿ç”¨è€…æ˜ç¢ºæä¾›æ—¥æœŸ â†’ ä½¿ç”¨è©²æ—¥æœŸ\nè‹¥å®Œå…¨ç„¡æ³•åˆ¤æ–· â†’ ç”¨ä¸€å¥è©±è©¢å•ä½¿ç”¨è€…æ—¥æœŸ\n- é‡‘é¡å¦‚æœæ˜¯æ”¯å‡ºé ˆä»¥è² æ•¸å‘ˆç¾ï¼Œæ”¶å…¥ä»¥æ­£æ•¸å‘ˆç¾\n\nğŸ“¦ä½ å¿…é ˆè¼¸å‡ºçš„è³‡æ–™æ¬„ä½\nè«‹ä¸»å‹•å‘¼å«ç³»çµ±å·¥å…· `Date & Time` å–å¾—æ—¥æœŸ\nç•¶è³‡æ–™ï¼ˆlineID,date, item, category, amountï¼‰éƒ½é½Šå…¨æ™‚ï¼Œ\nä½ çš„å›è¦† åªèƒ½ è¼¸å‡ºä»¥ä¸‹ JSON æ ¼å¼ï¼š\n```\n{\n  \"lineID\": \"lineI\",\n  \"date\": \"YYYY-MM-DD\",\n  \"item\": \"å“é …åç¨±\",\n  \"category\": \"é¡åˆ¥\",\n  \"amount\": æ•¸å­—\n}\n```\n\nâ—çµ•å°ç¦æ­¢ï¼š\n- åœ¨ JSON å‰å¾Œå¢åŠ ä»»ä½•ä¸­æ–‡ã€èªªæ˜ã€è§£æã€å®¢å¥—èª\n- è¼¸å‡º Markdownã€è¡¨æ ¼ã€æ–‡å­—æ®µè½\n- åœ¨ JSON å‰å¾ŒåŠ å…¥å¤šé¤˜ç¬¦è™Ÿæˆ–æ›è¡Œ\n\nä½ åªèƒ½è¼¸å‡º ç´” JSONã€‚\n\nã€è¼¸å‡ºé‚è¼¯è¦å‰‡ã€‘\n1. å¦‚æœä½¿ç”¨è€…çš„è¨Šæ¯èˆ‡è¨˜å¸³æœ‰é—œï¼Œä¸¦ä¸”å››å€‹æ¬„ä½ï¼ˆæ—¥æœŸã€å“é …ã€é¡åˆ¥ã€é‡‘é¡ï¼‰éƒ½å·²å–å¾—ï¼Œ\n   ä½ å¿…é ˆè¼¸å‡º JSONï¼ˆé€™å€‹ JSON æœƒé€åˆ° Structured Output Parserï¼‰ã€‚\n2. å¦‚æœä½¿ç”¨è€…è¼¸å…¥çš„å…§å®¹èˆ‡è¨˜å¸³ç„¡é—œï¼Œä½ æ‡‰è¼¸å‡ºä¸€èˆ¬æ–‡å­—å›è¦†ï¼ˆä¸èƒ½è¼¸å‡º JSONï¼‰ï¼Œ\n   ä¾‹å¦‚ï¼šã€Œé€™éƒ¨åˆ†èˆ‡è¨˜å¸³ç„¡é—œå”·ï¼Œæˆ‘å¯ä»¥å”åŠ©ä½ è¨˜éŒ„æ”¯å‡ºæˆ–æ”¶å…¥ï¼ã€\n3. JSON åƒ…èƒ½åœ¨è³‡æ–™å®Œæ•´ã€ä¸”å…§å®¹ç¢ºå®šæ˜¯è¨˜å¸³æ™‚ä½¿ç”¨ã€‚"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        -3040,
        -1280
      ],
      "id": "506beba8-4105-465a-a0e7-726073c11552",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "zeabur-test",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        -4176,
        -784
      ],
      "id": "d217fdc1-d3a2-4e8d-9234-7590fa171519",
      "name": "Webhook",
      "webhookId": ""
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.dateTimeTool",
      "typeVersion": 2,
      "position": [
        -2960,
        -1056
      ],
      "id": "e09d4f6c-c431-45a4-9924-ff9e5544a87d",
      "name": "Date & Time"
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"lineID\" : \"lineID\",\n  \"date\": \"YYYY-MM-DD\",\n  \"item\": \"å“é …åç¨±\",\n  \"category\": \"é¡åˆ¥\",\n  \"amount\": 8\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -2832,
        -1056
      ],
      "id": "87d26d3c-b2ff-4436-a7d5-a9dc4c8cb5ea",
      "name": "Structured Output Parser1"
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "",
          "mode": "list",
          "cachedResultName": "",
          "cachedResultUrl": ""
        },
        "sheetName": {
          "__rl": true,
          "value": 901530896,
          "mode": "list",
          "cachedResultName": "",
          "cachedResultUrl": ""
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "æ—¥æœŸ": "={{ $json.output.date }}",
            "å“é …": "={{ $json.output.item }}",
            "é¡åˆ¥": "={{ $json.output.category }}",
            "é‡‘é¡": "={{ $json.output.amount }}",
            "Line ID": "={{ $json.output.lineID }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Line ID",
              "displayName": "Line ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "æ—¥æœŸ",
              "displayName": "æ—¥æœŸ",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "å“é …",
              "displayName": "å“é …",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "é¡åˆ¥",
              "displayName": "é¡åˆ¥",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "é‡‘é¡",
              "displayName": "é‡‘é¡",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -2560,
        -1184
      ],
      "id": "2f8bb3ec-273d-426e-ad49-07af8677713d",
      "name": "Append row in sheet",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "",
          "name": ""
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d590e7dd-14f2-4cb1-b263-f2fee7bd474b",
              "name": "message",
              "value": "={{ $json.body.events[0].message.text }}",
              "type": "string"
            },
            {
              "id": "e8476673-e21e-43b4-a35a-c9acadf84425",
              "name": "lineID",
              "value": "={{ $json.body.events[0].source.userId }}",
              "type": "string"
            },
            {
              "id": "f7f56321-95fb-40b8-9e11-1a11ae84639f",
              "name": "replyToken",
              "value": "={{ $json.body.events[0].replyToken }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -3952,
        -784
      ],
      "id": "abab1b61-b4f3-4b09-ba1f-2a1bf839ca6c",
      "name": "Edit Fields"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.line.me/v2/bot/message/reply",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBearerAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n    \"replyToken\":\"{{ $('Edit Fields').item.json.replyToken }}\",\n    \"messages\":[\n        {\n            \"type\":\"text\",\n            \"text\":\"å¥½çš„ï¼Œç«‹åˆ»å¹«ä½ é€²è¡Œè¨˜å¸³å·¥ä½œ\" \n        },\n        {\n            \"type\":\"text\",\n            \"text\":\"{{ $json['å“é …'] }}ï¼Œå·²å®Œæˆè¨˜å¸³\" \n        }\n    ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        -2336,
        -1184
      ],
      "id": "38fce0fc-0a66-4e76-bca7-98ddc32f54ed",
      "name": "HTTP Request",
      "credentials": {
        "httpBearerAuth": {
          "id": "",
          "name": ""
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=message :ã€€{{ $json.message }}\nlineID : {{ $json.lineID }}\nreplyToken : {{ $json.replyToken }}",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "ä½ æ˜¯ä¸€å€‹å°ˆé–€è² è²¬ã€Œä½¿ç”¨è€…æ„åœ–åˆ¤æ–·ã€çš„ AI åŠ©ç†ã€‚  \nä½ çš„ä»»å‹™åªæœ‰ä¸€å€‹ï¼šè§£æä½¿ç”¨è€…çš„è¨Šæ¯å…§å®¹ï¼Œä¸¦è¼¸å‡ºå…¶æ„åœ–åˆ†é¡ã€‚  \nè«‹å‹™å¿…ä½¿ç”¨å°ç£ç¹é«”ä¸­æ–‡ç†è§£ï¼Œä½†å›è¦†å¿…é ˆæ˜¯ç´” JSONï¼Œä¸å¾—åŠ å…¥ä»»ä½•èªªæ˜æ–‡å­—ã€‚\n\n---\n\nmessageã€lineIDã€replyToken æŠ“å–åŸæœ¬ prompt å…§åƒæ•¸å³å¯\n\nã€ä½ éœ€è¦åˆ¤æ–·çš„æ„åœ–é¡å‹ã€‘\n\n1. \"record_expense_income\"\n   - ç•¶ä½¿ç”¨è€…æƒ³è¨˜éŒ„æ”¯å‡ºæ”¶å…¥æ™‚ï¼Œä¾‹å¦‚ï¼š\n     ã€Œæˆ‘åƒäº†ç‰›è‚‰éºµ 120ã€\n     ã€Œä»Šå¤©æ­ Uber 250ã€\n     ã€Œåˆé¤ 80 å¡«ä¸€ä¸‹ã€\n     ã€Œå¹«æˆ‘è¨˜ä¸€ç­†äº¤é€šè²» 100ã€\n     ã€Œæˆ‘ä»Šå¤©é ˜è–ªæ°´ 30000ã€\n     ã€Œæ”¶åˆ°çé‡‘ 5000ã€\n\n\n2. \"ask_summary\"\n   - ç•¶ä½¿ç”¨è€…æƒ³æŸ¥è©¢æ”¶æ”¯æ‘˜è¦ï¼Œä¾‹å¦‚ï¼š\n     ã€Œé€™å€‹æœˆèŠ±å¤šå°‘ã€\n     ã€Œå¹«æˆ‘çœ‹ä¸€ä¸‹é€™é€±çš„æ”¯å‡ºã€\n     ã€Œæˆ‘é‚„å‰©å¤šå°‘éŒ¢ã€\n\n3. \"non_accounting\"\n   - ç•¶ä½¿ç”¨è€…çš„è¨Šæ¯è·Ÿè¨˜å¸³å®Œå…¨ç„¡é—œï¼Œä¾‹å¦‚ï¼š\n     ã€Œä½ æ˜¯èª°ã€\n     ã€Œä»Šå¤©å¤©æ°£å¦‚ä½•ã€\n     ã€Œä½ å¥½å¯æ„›ã€\n     ã€Œä½ èƒ½åšä»€éº¼ã€\n\n4. \"unknown\"\n   - ç•¶ä½ ç„¡æ³•åˆ¤æ–·è¨Šæ¯å…§å®¹çš„æ„åœ–ã€‚\n\n---\n\nã€å›è¦†æ ¼å¼ï¼ˆæœ€é‡è¦ï¼‰ã€‘\n\nä½ åªèƒ½è¼¸å‡ºä»¥ä¸‹ JSON çµæ§‹ï¼Œä¸å¾—åŠ å…¥å…¶ä»–æ–‡å­—ï¼š\n\n{\n  \"lineID\" : \"\",\n  \"message\" : \"\",\n  \"replyToken\" : \"\",\n  \"intent\": \"record_expense_income | ask_summary | non_accounting | unknown\"\n}\n\nè«‹åš´æ ¼éµå®ˆä»¥ä¸Šè¦å‰‡ã€‚"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        -3728,
        -784
      ],
      "id": "6a5c0c15-bad4-48de-b106-928efcc59b25",
      "name": "AI Agent1"
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n    \"lineID\" : \"\",\n  \"message\" : \"\",\n  \"replyToken\" : \"\",\n  \"intent\": \"record_expense_income\"\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -3600,
        -560
      ],
      "id": "0642fb04-a2ad-4535-b39b-1c6b65e9e00a",
      "name": "Structured Output Parser"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.output.intent }}",
                    "rightValue": "record_expense_income",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "4efb75aa-c70a-4acd-af4e-4383ef3aa97b"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "è¨˜å¸³"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "f9bf7399-a290-4f1f-983b-035331084fbd",
                    "leftValue": "={{ $json.output.intent }}",
                    "rightValue": "ask_summary",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "æŸ¥å¸³"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "f31e5136-96ab-4acb-9421-6d8308ff1470",
                    "leftValue": "={{ $json.output.intent }}",
                    "rightValue": "non_accounting",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "ä¸€èˆ¬å°è©±"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "7a445520-660a-4455-885a-5fd10aa93aa5",
                    "leftValue": "={{ $json.output }}",
                    "rightValue": "unknown",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "ç„¡æ³•åˆ¤æ–·æ„åœ–"
            }
          ]
        },
        "options": {
          "fallbackOutput": 3
        }
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.3,
      "position": [
        -3376,
        -816
      ],
      "id": "d9360c09-33ad-4d0c-a3ab-6abfb7f24532",
      "name": "Switch"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $('Edit Fields').item.json.message }}",
        "options": {
          "systemMessage": "ä½ æ˜¯ä¸€å€‹å¾ˆæ„›èŠå¤©çš„åŠ©ç†\nè«‹å…¨ç¨‹ä½¿ç”¨ å°ç£ç¹é«”ä¸­æ–‡ å›è¦†ã€‚\n\nã€å›è¦†æ ¼å¼ã€‘\n- æ‰€æœ‰æ›è¡Œéƒ½å¿…é ˆä½¿ç”¨ \\nï¼ˆä¸€å€‹åæ–œç·šï¼‰\n- ä¸è¦ä½¿ç”¨ Markdown èªæ³•ï¼ˆä¾‹å¦‚ **ç²—é«”**ã€###ï¼‰\n- å…è¨±ä½¿ç”¨ç¬¦è™Ÿæ’ç‰ˆï¼Œä¾‹å¦‚ï¼š\nã€åˆ†é¡ã€‘\nâ€¢ é …ç›®ï¼š\nâ€” åˆ†éš”ç·š â€”\n- è«‹ä½¿ç”¨è‡ªç„¶æ®µè½èªªæ˜çµæœ  \n- å¿…è¦æ™‚å¯åˆ—é»å‘ˆç¾é‡é»  "
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        -3040,
        -384
      ],
      "id": "298d3674-9b97-4e7e-a30c-1bec38218d1c",
      "name": "AI Agent2"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.line.me/v2/bot/message/reply",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBearerAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n    \"replyToken\":\"{{ $('Edit Fields').item.json.replyToken }}\",\n    \"messages\":[\n        {\n            \"type\":\"text\",\n            \"text\":\"{{ $json.output.replace(/\\n/g, \"\") }}\" \n        }\n    ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        -2560,
        -384
      ],
      "id": "58781002-21e8-4488-91ad-5b22c6cb594a",
      "name": "HTTP Request1",
      "credentials": {
        "httpBearerAuth": {
          "id": "",
          "name": ""
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=message : {{ $json.output.message }}\nlineID : {{ $json.output.lineID }}\nreplyToken : {{ $json.output.replyToken }}",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "ä½ æ˜¯ä¸€ä½å°ˆæ¥­ã€è¦ªåˆ‡ã€æ“…é•·è²¡å‹™æ•´ç†çš„ AI æŸ¥å¸³åŠ©ç†ã€‚\nä½ çš„ä»»å‹™æ˜¯ï¼šåœ¨å›è¦†ä½¿ç”¨è€…ä»»ä½•æŸ¥å¸³å•é¡Œå‰ï¼Œå¿…é ˆå‘¼å«å·¥å…· `AccountingData` å–å¾—è³‡æ–™ï¼Œä¹‹å¾Œå†é€²è¡Œåˆ†æã€‚\nè«‹å…¨ç¨‹ä½¿ç”¨å°ç£ç¹é«”ä¸­æ–‡å›è¦†ã€‚\n\nè‡ªå‹•åˆ¤æ–·æ—¥æœŸï¼š\n- è‹¥ä½¿ç”¨è€…èªªã€Œä»Šå¤©ã€ã€Œå‰›å‰›ã€ã€Œæˆ‘åƒäº†ã€ã€Œæˆ‘è²·äº†ã€â†’ å¿…é ˆå‘¼å« Date & Time1 å·¥å…·å–å¾—ä»Šå¤©æ—¥æœŸ\n- è‹¥ä½¿ç”¨è€…èªªã€Œæ˜¨å¤©ã€â†’ ä½¿ç”¨ä»Šå¤©æ—¥æœŸ - 1 å¤©\n- è‹¥ä½¿ç”¨è€…æ˜ç¢ºæä¾›æ—¥æœŸ â†’ ä½¿ç”¨è©²æ—¥æœŸ\n- è‹¥å®Œå…¨ç„¡æ³•åˆ¤æ–· â†’ ç”¨ä¸€å¥è©±è©¢å•ä½¿ç”¨è€…æ—¥æœŸ\n- ä¸å¯ä»¥æŠŠåƒæ•¸çµ¦ å·¥å…· `AccountingData`ï¼Œä»–æ˜¯å–®ç´”æ’ˆå–è³‡æ–™ã€‚\n\næ‰€ä»¥æµç¨‹å°±æ˜¯\nå‘¼å«å·¥å…· `AccountingData` å–å¾—å®Œæ•´è¨˜å¸³è³‡æ–™\nè‡ªå‹•åˆ¤æ–·æ—¥æœŸ\nä¾ç…§åˆ¤æ–·æ—¥æœŸé€²è¡Œç¯©é¸\nä¸¦å›ç­”çµæœ\n\n- ä¾æ“šå·¥å…·å›å‚³çš„è³‡æ–™åšé‹ç®—èˆ‡æ•´ç† \n- å›è¦†ç°¡æ½”æ˜ç¢º \n- å›è¦†å…§å®¹æ‡‰åŒ…å«ï¼š \n- æ•¸å­—çµæœï¼ˆç¸½é¡ã€åˆ†é¡é‡‘é¡ç­‰ï¼‰ \n- ç°¡çŸ­æ‘˜è¦ï¼ˆä¾‹å¦‚ï¼šã€Œæ¯”ä¸Šé€±å¤š 15%ã€ï¼‰ \n- å¿…è¦æ™‚å†åŠ æº«å’Œå°å»ºè­° \n\nã€å›è¦†æ ¼å¼ã€‘ \n- æ‰€æœ‰æ›è¡Œéƒ½åªèƒ½ä½¿ç”¨ä¸€å€‹ \\nï¼ˆä¸€å€‹åæ–œç·šï¼‰ï¼Œä¸èƒ½ä½¿ç”¨å…©å€‹åæ–œç·š\n- ä¸è¦ä½¿ç”¨ Markdown èªæ³•ï¼ˆä¾‹å¦‚ **ç²—é«”**ã€###ï¼‰\n- å…è¨±ä½¿ç”¨ç¬¦è™Ÿæ’ç‰ˆï¼Œä¾‹å¦‚ï¼š ã€åˆ†é¡ã€‘ â€¢ é …ç›®ï¼šé‡‘é¡ ï¼Œâ€” åˆ†éš”ç·š â€” \n- è«‹ä½¿ç”¨è‡ªç„¶æ®µè½èªªæ˜çµæœ \n- å¿…è¦æ™‚å¯åˆ—é»å‘ˆç¾é‡é»\n\næ ¼å¼å¿…é ˆç”¨ JSON å›å‚³ï¼ŒreplyToken æŠ“å– prompt çš„è³‡æ–™å³å¯ï¼Œtext å‘ˆç¾è§£ææˆæœ\n{\n   \"replyToken\" : \"\",\n   \"text\" : \"\"\n}\n\nã€çµ•å°è¦éµå®ˆã€‘\nğŸ’¡ å›è¦†å‰å¿…é ˆå…ˆå‘¼å« `Date & Time2` å’Œ `AccountingData`\nğŸ’¡ æ‰€æœ‰æ›è¡Œéƒ½åªèƒ½ä½¿ç”¨ \\nï¼ˆä¸€å€‹åæ–œç·šï¼‰ï¼Œä¸èƒ½ä½¿ç”¨ \\n\\n ( å…©å€‹åæ–œç·š )"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        -3040,
        -880
      ],
      "id": "dc1d1d2d-1297-468a-9d69-32942c23d22f",
      "name": "AI Agent3"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatDeepSeek",
      "typeVersion": 1,
      "position": [
        -3152,
        -656
      ],
      "id": "02c43e49-6136-4b06-b457-af05b2740a14",
      "name": "DeepSeek Chat Model",
      "credentials": {
        "deepSeekApi": {
          "id": "",
          "name": ""
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatDeepSeek",
      "typeVersion": 1,
      "position": [
        -3088,
        -1056
      ],
      "id": "9a42d322-43aa-4a15-890d-8f9661e8c18d",
      "name": "DeepSeek Chat Model1",
      "credentials": {
        "deepSeekApi": {
          "id": "",
          "name": ""
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatDeepSeek",
      "typeVersion": 1,
      "position": [
        -2960,
        -160
      ],
      "id": "d8cd7cb2-cb57-4b94-8d91-d74cb67f1941",
      "name": "DeepSeek Chat Model2",
      "credentials": {
        "deepSeekApi": {
          "id": "",
          "name": ""
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.dateTimeTool",
      "typeVersion": 2,
      "position": [
        -3024,
        -656
      ],
      "id": "b71cd713-3b2d-464b-ac64-a937013f0df4",
      "name": "Date & Time1"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatDeepSeek",
      "typeVersion": 1,
      "position": [
        -3728,
        -560
      ],
      "id": "d6d08e9f-b228-4f13-9f20-66dcb87e5ce6",
      "name": "DeepSeek Chat Model3",
      "credentials": {
        "deepSeekApi": {
          "id": "",
          "name": ""
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "",
          "mode": "list",
          "cachedResultName": "",
          "cachedResultUrl": ""
        },
        "sheetName": {
          "__rl": true,
          "value": 901530896,
          "mode": "list",
          "cachedResultName": "",
          "cachedResultUrl": ""
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "Line ID",
              "lookupValue": "={{ $json.output.lineID }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheetsTool",
      "typeVersion": 4.7,
      "position": [
        -2896,
        -656
      ],
      "id": "7905865a-220d-44a5-9649-faec8fba9c35",
      "name": "AccountingData",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "",
          "name": ""
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.line.me/v2/bot/message/reply",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBearerAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n    \"replyToken\":\"{{ $json.output.replyToken }}\",\n    \"messages\":[\n        {\n            \"type\":\"text\",\n            \"text\":\"{{ $json.output.text.replace(/\\n/g, \"\\\\n\") }}\" \n        }\n    ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        -2560,
        -768
      ],
      "id": "13958dbc-08da-44d0-9f4a-5846611770a7",
      "name": "HTTP Request2",
      "credentials": {
        "httpBearerAuth": {
          "id": "",
          "name": ""
        }
      }
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n   \"replyToken\" : \"\",\n   \"text\" : \"\"\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -2768,
        -656
      ],
      "id": "d51d76ea-5830-43e2-8007-2382b83145d1",
      "name": "Structured Output Parser2"
    }
  ],
  "pinData": {},
  "connections": {
    "Webhook": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Date & Time": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Append row in sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser1": {
      "ai_outputParser": [
        [
          {
            "node": "AI Agent",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "AI Agent1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Append row in sheet": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "AI Agent1",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent1": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "AI Agent3",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "AI Agent2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "AI Agent2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent2": {
      "main": [
        [
          {
            "node": "HTTP Request1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "DeepSeek Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent3",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "DeepSeek Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "DeepSeek Chat Model2": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent2",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Date & Time1": {
      "ai_tool": [
        [
          {
            "node": "AI Agent3",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "DeepSeek Chat Model3": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "AccountingData": {
      "ai_tool": [
        [
          {
            "node": "AI Agent3",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent3": {
      "main": [
        [
          {
            "node": "HTTP Request2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser2": {
      "ai_outputParser": [
        [
          {
            "node": "AI Agent3",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "75c0bddb-e6d6-4e50-aa10-5501dee6bca7",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": ""
  },
  "id": "NBKgpW8X1narV734",
  "tags": [
    {
      "updatedAt": "2025-12-11T15:56:55.184Z",
      "createdAt": "2025-12-11T15:56:55.184Z",
      "id": "RGyP5P3s5blxFvJK",
      "name": "workshop"
    },
    {
      "updatedAt": "2025-12-11T15:56:44.291Z",
      "createdAt": "2025-12-11T15:56:44.291Z",
      "id": "YAUkYvkxmWlq3ziO",
      "name": "service"
    },
    {
      "updatedAt": "2025-12-11T02:57:11.571Z",
      "createdAt": "2025-12-11T02:57:11.571Z",
      "id": "u6b8svyrdsA4yKaP",
      "name": "AI"
    }
  ]
}